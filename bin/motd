#!/usr/bin/env bash

last_log() {
  last --time-format=full -2 ${$(tty)##*/} | sed -n 2p | awk 'BEGIN{FS=" "} {printf "\033[32m  Welcome back Nuno! Last login (on %s): %s %s %s %s %s\n",$2,$1,$3,$4,$5,$6}'
}

C='\e[0m' #clear
R='\e[38;5;01m'
Y='\e[38;5;03m'
W='\e[38;5;11m'

last_log

motd+="                            (    , )       (.   )  (   ',    )    (        \n"
motd+="   ______________            .' ) ( . )    ,  ( ,     )   ( .    .' ) )    \n"
motd+="  ||            ||        ). , ( .   (  ) ( , ')  .' (  ,    )     ' (  )  \n"
motd+="  ||            ||       (-)  . ), ) -) -,')  (, ) '. )  ,. (' )  . )-) -  \n"
motd+="  ||            ||       @@@  @@@  @@@@@@@    @@@@@@   @@@  @@@  @@@@@@@   \n"
motd+="  ||            ||       @@@@ @@@  @@@@@@@@  @@@@@@@@  @@@  @@@  @@@@@@@@  \n"
motd+="  ||____________||       @@!@!@@@  @@!  @@!  @@@  @@!  @@@  @@!  @@!  @@@  \n"
motd+="  |______________|       !@!!@!@!  !@!  @!@  !@!  @!@  !@!  @!@  !@!  @!@  \n"
motd+="   \j############j\      @!@ !!@!  @!@  !@!  @!@!@!@!  @!@  !@!  @!@  !@!  \n"
motd+="    \j############j\     :!:  !:!  :!:  !:!  :!:  !:!   ::!!:!   :!:  !:!  \n"
motd+="     \      ____    \     ::   ::   :::: ::  ::   :::    ::::     :::: ::  \n"
motd+="      \_____\___\____\   ::    :   :: :  :    :   : :     :      :: :  :     "

motd="$( \
  echo "$motd" \
\
  | sed "s#@#\\$R@\\$C#g" \
  | sed "s#(#\\$R(\\$C#g" \
  | sed "s#)#\\$R)\\$C#g" \
  | sed "s#,#\\$R,\\$C#g" \
  | sed "s#'#\\$R'\\$C#g" \
\
  | sed "s#-#\\$R\_\\$C#g" \
  | sed "s#\.#\\$R.\\$C#g" \
\
  | sed "s#!#\\$Y!\\$C#g" \
  | sed "s#:#\\$Y:\\$C#g" \
)"

echo -e "$motd\n"
